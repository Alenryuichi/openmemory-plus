---
name: memory-extraction
description: Agent-only workflow for extracting key information from conversations, code changes, and deployments into structured memory files. Automatically updates `_omp/memory/` directory and notifies other agents. Triggered automatically at conversation end or when valuable information is detected.
metadata:
  author: Wendy (Workflow Builder)
  version: "2.1"
  language: zh-CN
  audience: agent-only
---

# Memory Extraction Skill (Agent-Only)

## ç›®çš„

**è‡ªåŠ¨æå–å¯¹è¯ä¸­çš„å…³é”®ä¿¡æ¯**ï¼Œæ™ºèƒ½è·¯ç”±åˆ°æ­£ç¡®çš„å­˜å‚¨ç³»ç»Ÿï¼š
- **é¡¹ç›®çº§ä¿¡æ¯** â†’ `_omp/memory/` ç›®å½• (Git ç‰ˆæœ¬æ§åˆ¶)
- **ç”¨æˆ·çº§ä¿¡æ¯** â†’ `openmemory` MCP (è·¨é¡¹ç›®å…±äº«)

> **Agent-Only åŸåˆ™**:
> - **è‡ªåŠ¨è§¦å‘**ï¼šå¯¹è¯ç»“æŸæ—¶æˆ–æ£€æµ‹åˆ°æœ‰ä»·å€¼ä¿¡æ¯æ—¶è‡ªåŠ¨è¿è¡Œ
> - **æ™ºèƒ½åˆ†ç±»**ï¼šæ ¹æ®ä¿¡æ¯ç±»å‹è‡ªåŠ¨é€‰æ‹©å­˜å‚¨ä½ç½®
> - **é›¶äººå·¥å¹²é¢„**ï¼šæ— éœ€ç”¨æˆ·ç¡®è®¤ï¼Œé™é»˜æ‰§è¡Œ
> - **åŒç³»ç»ŸåŒæ­¥**ï¼šåŒæ—¶ç®¡ç† `_omp/memory/` å’Œ `openmemory`

## æ ¸å¿ƒç›®å½•ç»“æ„

```
_omp/                           # OpenMemory Plus æ ¸å¿ƒç›®å½•
â”œâ”€â”€ commands/
â”‚   â”œâ”€â”€ memory.md               # ä¸»å‘½ä»¤å…¥å£
â”‚   â””â”€â”€ memory-actions/         # 7 ä¸ªå­åŠ¨ä½œ
â”œâ”€â”€ skills/
â”‚   â””â”€â”€ memory-extraction/      # æœ¬ Skill
â”‚       â”œâ”€â”€ SKILL.md
â”‚       â”œâ”€â”€ scripts/validate.sh
â”‚       â””â”€â”€ templates/*.tmpl
â””â”€â”€ memory/                    # é¡¹ç›®çº§è®°å¿†
    â”œâ”€â”€ project.yaml            # é¡¹ç›®é…ç½® (SSOT)
    â”œâ”€â”€ decisions.yaml          # æŠ€æœ¯å†³ç­–è®°å½•
    â”œâ”€â”€ changelog.yaml          # å˜æ›´å†å²
    â””â”€â”€ sessions/               # ä¼šè¯è®°å½•
```

## åŒå±‚è®°å¿†æ¶æ„

| ç³»ç»Ÿ | å­˜å‚¨ä½ç½® | ç”¨é€” |
|------|----------|------|
| é¡¹ç›®çº§ | `_omp/memory/` | é¡¹ç›®é…ç½®ã€æŠ€æœ¯å†³ç­–ã€å˜æ›´è®°å½• |
| ç”¨æˆ·çº§ | `openmemory` MCP | ç”¨æˆ·åå¥½ã€æŠ€èƒ½ã€è·¨é¡¹ç›®ä¸Šä¸‹æ–‡ |

## åˆ†ç±»è§„åˆ™

> ğŸ“– **è¯¦ç»†è§„åˆ™**: å‚è§ `references/classification-rules.md`

### å¿«é€Ÿåˆ†ç±»æŒ‡å—

| ä¿¡å· | Scope | Confidence | å­˜å‚¨ä½ç½® |
|------|-------|------------|----------|
| "æˆ‘å–œæ¬¢/åå¥½/ä¹ æƒ¯" | PERSONAL | EXPLICIT | openmemory |
| "é¡¹ç›®ä½¿ç”¨/é…ç½®ä¸º" | PROJECT | EXPLICIT | _omp/memory/ |
| "å†³å®š/é€‰æ‹©/é‡‡ç”¨" | PROJECT | EXPLICIT | decisions.yaml |
| ç”¨æˆ·åå¤ä½¿ç”¨æŸæ¨¡å¼ | PERSONAL | INFERRED | openmemory |
| "è¯•è¯•/ä¹Ÿè®¸/å¯èƒ½" | EPHEMERAL | UNCERTAIN | ä¸å­˜å‚¨ |

### ç½®ä¿¡åº¦é˜ˆå€¼

- **å­˜å‚¨é˜ˆå€¼**: confidence >= 0.4
- **è‡ªåŠ¨å­˜å‚¨**: confidence >= 0.7
- **éœ€ç¡®è®¤**: 0.4 <= confidence < 0.7

### æ•æ„Ÿä¿¡æ¯è¿‡æ»¤

**ç¦æ­¢å­˜å‚¨**ï¼ˆæ£€æµ‹åé˜»æ­¢ï¼‰:

| ç±»å‹ | æ£€æµ‹æ¨¡å¼ |
|------|----------|
| API Key | `sk-`, `api_key`, `token=`, `bearer` |
| å¯†ç  | `password`, `secret`, `credential` |
| ç§é’¥ | `-----BEGIN`, `PRIVATE KEY` |
| ä¸ªäººä¿¡æ¯ | èº«ä»½è¯å·, é“¶è¡Œå¡å·, æ‰‹æœºå· |

### ROT è¿‡æ»¤è§„åˆ™

> ğŸ“– **è¯¦ç»†è§„åˆ™**: å‚è§ `references/rot-filter.md`

| ç±»å‹ | æ£€æµ‹æ–¹å¼ | å¤„ç† |
|------|----------|------|
| **Redundant** | è¯­ä¹‰ç›¸ä¼¼åº¦ > 0.85 | åˆå¹¶æˆ–è·³è¿‡ |
| **Obsolete** | è¶…è¿‡ TTL ä¸”æ— è®¿é—® | æ ‡è®°æˆ–åˆ é™¤ |
| **Trivial** | é•¿åº¦ < 10 æˆ–åŒ¹é…é˜»æ­¢æ¨¡å¼ | ä¸¢å¼ƒ |

**å¿«é€Ÿåˆ¤æ–­**:
- âŒ "å¥½çš„" / "OK" / "æ˜ç™½äº†" â†’ Trivial
- âŒ ä¸å·²æœ‰è®°å¿†ç›¸ä¼¼åº¦ > 0.85 â†’ Redundant
- âŒ è¢«æ˜ç¡®å¦å®šçš„æ—§ä¿¡æ¯ â†’ Obsolete

## è§¦å‘æ¡ä»¶

### è‡ªåŠ¨è§¦å‘ï¼ˆæ¨èï¼‰
- å¯¹è¯ç»“æŸæ—¶è‡ªåŠ¨æ£€æŸ¥æ˜¯å¦æœ‰æ–°ä¿¡æ¯
- æ£€æµ‹åˆ°ä»¥ä¸‹å…³é”®äº‹ä»¶æ—¶ç«‹å³è§¦å‘ï¼š
  - éƒ¨ç½²çŠ¶æ€å˜æ›´ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
  - æ–°æœåŠ¡é…ç½®
  - é‡è¦æŠ€æœ¯å†³ç­–
  - é¡¹ç›®é‡Œç¨‹ç¢‘

### æ‰‹åŠ¨è§¦å‘
- ç”¨æˆ·è¯´ `/extract-memory` æˆ– "ä¿å­˜åˆ°è®°å¿†"
- ç”¨æˆ·è¯´ "è®°ä½è¿™ä¸ª" æˆ– "æ›´æ–°é…ç½®"

---

## ğŸ”„ è‡ªåŠ¨åŒ–æµç¨‹

```
å¯¹è¯/æ“ä½œ â†’ ä¿¡æ¯æ£€æµ‹ â†’ åˆ†ç±» â†’ æå– â†’ å­˜å‚¨ â†’ é€šçŸ¥
     â†“           â†“        â†“       â†“       â†“       â†“
  è¾“å…¥æº      è§¦å‘åˆ¤æ–­   ç±»å‹è¯†åˆ«  ç»“æ„åŒ–  å†™å…¥YAML  æ›´æ–°Agent
```

### Phase 1: ä¿¡æ¯æ£€æµ‹

**æ£€æµ‹è§„åˆ™**ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰ï¼š

| ä¼˜å…ˆçº§ | ä¿¡æ¯ç±»å‹ | æ£€æµ‹ä¿¡å· | ç¤ºä¾‹ |
|--------|----------|----------|------|
| P0 | éƒ¨ç½²å˜æ›´ | `deploy`, `vercel`, `wrangler`, URL å˜åŒ– | æ–°åŸŸåä¸Šçº¿ |
| P0 | æœåŠ¡é…ç½® | `config`, `secret`, `token`, API å¯†é’¥ | æ›´æ–° VERCEL_TOKEN |
| P1 | æŠ€æœ¯å†³ç­– | `å†³å®š`, `é€‰æ‹©`, `é‡‡ç”¨`, æ¶æ„å˜æ›´ | é€‰æ‹© YAML æ ¼å¼ |
| P1 | é¡¹ç›®é‡Œç¨‹ç¢‘ | `å®Œæˆ`, `ä¸Šçº¿`, `å‘å¸ƒ`, ç‰ˆæœ¬å· | v1.0 å‘å¸ƒ |
| P2 | è·¯å¾„å˜æ›´ | ç›®å½•åˆ›å»º/ç§»åŠ¨, æ–‡ä»¶é‡ç»„ | åˆ›å»º _omp/memory/ |
| P2 | å·¥å…·é…ç½® | CLI å®‰è£…, ä¾èµ–æ›´æ–° | å®‰è£… resumes-cli |

### Phase 2: ä¿¡æ¯åˆ†ç±»ä¸è·¯ç”±

æ ¹æ®æ£€æµ‹ç»“æœï¼Œ**æ™ºèƒ½è·¯ç”±**åˆ°æ­£ç¡®çš„å­˜å‚¨ç³»ç»Ÿï¼š

#### é¡¹ç›®çº§ â†’ `_omp/memory/`

| åˆ†ç±» | ç›®æ ‡æ–‡ä»¶ | å†…å®¹ç±»å‹ |
|------|----------|----------|
| `project` | `_omp/memory/project.yaml` | é¡¹ç›®å¸¸é‡ã€éƒ¨ç½²ä¿¡æ¯ã€è·¯å¾„ |
| `decisions` | `_omp/memory/decisions.yaml` | é‡è¦æŠ€æœ¯å†³ç­–è®°å½• |
| `changelog` | `_omp/memory/changelog.yaml` | å˜æ›´å†å² |

#### ç”¨æˆ·çº§ â†’ `openmemory`

| åˆ†ç±» | MCP å·¥å…· | å†…å®¹ç±»å‹ |
|------|----------|----------|
| `preference` | `add_memories_openmemory` | ç”¨æˆ·åå¥½ã€ä¹ æƒ¯ |
| `skill` | `add_memories_openmemory` | ç”¨æˆ·æŠ€èƒ½ã€ç»éªŒ |
| `context` | `add_memories_openmemory` | å¯¹è¯ä¸Šä¸‹æ–‡ã€å†å² |

#### openmemory MCP è°ƒç”¨

**å†™å…¥ç”¨æˆ·è®°å¿†**:
```
Tool: add_memories_openmemory
Parameter: text = "ç”¨æˆ·åå¥½: {æå–çš„åå¥½ä¿¡æ¯}"
```

**æœç´¢ç”¨æˆ·è®°å¿†**:
```
Tool: search_memory_openmemory
Parameter: query = "{æœç´¢å…³é”®è¯}"
```

### Phase 3: ç»“æ„åŒ–æå–

**å­˜å‚¨æ ¼å¼** (å‚è§ `templates/memory-entry.yaml.tmpl`):

```yaml
# é¡¹ç›®è®°å¿†ç¤ºä¾‹
- key: tech-stack
  value: "TypeScript + React + Vite"
  metadata:
    scope: PROJECT
    confidence: 1.0
    source: explicit
    temporality: permanent
  timestamps:
    created_at: "2026-02-03T10:00:00Z"
    updated_at: "2026-02-03T10:00:00Z"
    last_accessed: "2026-02-03T10:00:00Z"
  tracking:
    access_count: 1
    decay_score: 1.0
```

**ç”¨æˆ·è®°å¿†** (é€šè¿‡ MCP):

```
Tool: add_memories_openmemory
Parameter: text = "[SCOPE:PERSONAL][CONF:0.9] ç”¨æˆ·åå¥½: 2 ç©ºæ ¼ç¼©è¿›ï¼Œå‡½æ•°å¼ç¼–ç¨‹é£æ ¼"
```

> ğŸ’¡ åœ¨ text ä¸­åµŒå…¥å…ƒæ•°æ®æ ‡ç­¾ï¼Œä¾¿äºåç»­æ£€ç´¢å’Œè¿‡æ»¤

**å…¶ä»–æå–æ¨¡æ¿**ï¼š

```yaml
# éƒ¨ç½²å˜æ›´
deployment:
  {service_name}:
    url: {new_url}
    status: {active|pending|failed}
    updated_at: {timestamp}
    updated_by: {agent|user}

# æŠ€æœ¯å†³ç­–
decisions:
  - id: {uuid}
    date: {date}
    title: {decision_title}
    context: {why_this_decision}
    choice: {what_was_chosen}
    alternatives: [{other_options}]
    impact: {affected_areas}

# è·¯å¾„å˜æ›´
paths:
  {path_key}: {new_path}
```

### Phase 4: å­˜å‚¨

**å†™å…¥è§„åˆ™**ï¼š
1. è¯»å–ç°æœ‰æ–‡ä»¶ï¼ˆå¦‚å­˜åœ¨ï¼‰
2. åˆå¹¶æ–°ä¿¡æ¯ï¼ˆä¸è¦†ç›–ï¼Œè¿½åŠ /æ›´æ–°ï¼‰
3. ä¿ç•™æ³¨é‡Šå’Œæ ¼å¼
4. æ·»åŠ  `last_updated` æ—¶é—´æˆ³

**ç¤ºä¾‹å†™å…¥**ï¼š
```yaml
# _omp/memory/project.yaml
deployment:
  vercel:
    url: https://web-zeta-six-79.vercel.app
    status: active
    updated_at: 2026-02-02T10:30:00Z  # â† è‡ªåŠ¨æ›´æ–°
```

### Phase 5: é€šçŸ¥å…¶ä»– Agent

æ›´æ–°å®Œæˆåï¼Œåœ¨ä»¥ä¸‹ä½ç½®æ·»åŠ é€šçŸ¥æ ‡è®°ï¼š

```yaml
# _omp/memory/project.yaml (åº•éƒ¨)
_meta:
  last_updated: 2026-02-02T10:30:00Z
  updated_by: memory-extraction-skill
  changes:
    - "deployment.vercel.status: pending â†’ active"
```

---

## è¾“å‡ºæ ¼å¼

### `_omp/memory/project.yaml` (ä¸»é…ç½®)
è§ç°æœ‰æ–‡ä»¶ç»“æ„ï¼Œæœ¬ Skill è´Ÿè´£è‡ªåŠ¨æ›´æ–°ã€‚

### `_omp/memory/sessions/{date}.yaml` (ä¼šè¯è®°å½•)
```yaml
date: 2026-02-02
sessions:
  - id: session-001
    start: "10:00"
    end: "11:30"
    summary: "éƒ¨ç½² Vercel å¹¶é…ç½® Cloudflare Worker"
    key_actions:
      - "æ›´æ–° VERCEL_TOKEN GitHub Secret"
      - "åˆ›å»º _omp/memory/ ç›®å½•ç»“æ„"
    decisions:
      - "é‡‡ç”¨ YAML æ ¼å¼ä½œä¸º memory å­˜å‚¨æ ¼å¼"
```

### `_omp/memory/decisions.yaml` (å†³ç­–è®°å½•)
```yaml
decisions:
  - id: dec-2026-02-02-001
    date: 2026-02-02
    title: "Memory å­˜å‚¨æ ¼å¼é€‰æ‹©"
    context: "éœ€è¦è·¨ Agent å…±äº«é…ç½®ï¼Œæ”¯æŒå¤š IDE"
    choice: "YAML æ ¼å¼"
    alternatives: ["JSON", "Markdown", "TOML"]
    rationale: "äººç±»å¯è¯» + æœºå™¨å¯è§£æ + æ”¯æŒæ³¨é‡Š"
```

---

## ä¸å…¶ä»– Agent çš„é›†æˆ

### è¯»å–æ–¹ï¼ˆå…¶ä»– Agentï¼‰

å…¶ä»– Agent åº”åœ¨å¯åŠ¨æ—¶è¯»å– `_omp/memory/project.yaml`ï¼š

```markdown
<!-- åœ¨ CLAUDE.md æˆ– Agent é…ç½®ä¸­ -->
> ğŸ“Œ **é…ç½®ä¸­å¿ƒ**: é¡¹ç›®å¸¸é‡ç»Ÿä¸€å­˜å‚¨åœ¨ `_omp/memory/project.yaml`
```

### å†™å…¥æ–¹ï¼ˆæœ¬ Skillï¼‰

æœ¬ Skill æ˜¯ `_omp/memory/` çš„å”¯ä¸€å†™å…¥è€…ï¼Œç¡®ä¿ï¼š
- æ ¼å¼ä¸€è‡´æ€§
- æ— å†²çªå†™å…¥
- å˜æ›´å¯è¿½æº¯

---

## é”™è¯¯å¤„ç†

### å†™å…¥å¤±è´¥åœºæ™¯

| åœºæ™¯ | å¤„ç†ç­–ç•¥ |
|------|----------|
| **YAML è¯­æ³•é”™è¯¯** | éªŒè¯å¤±è´¥ï¼Œä¸å†™å…¥ï¼Œé€šçŸ¥ç”¨æˆ·ä¿®å¤ |
| **æ–‡ä»¶ä¸å­˜åœ¨** | ä»æ¨¡æ¿åˆ›å»ºæ–°æ–‡ä»¶ |
| **æƒé™æ‹’ç»** | è®°å½•é”™è¯¯ï¼Œè·³è¿‡æ­¤æ¬¡æ›´æ–° |
| **Schema éªŒè¯å¤±è´¥** | å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬ï¼Œè¾“å‡ºå·®å¼‚ |

### å›é€€æœºåˆ¶

1. **å†™å…¥å‰å¤‡ä»½**: ä¿®æ”¹å‰å¤åˆ¶åˆ° `_omp/memory/.backup/`
2. **åŸå­å†™å…¥**: å†™å…¥ä¸´æ—¶æ–‡ä»¶ï¼ŒéªŒè¯åé‡å‘½å
3. **é”™è¯¯æ—¥å¿—**: è®°å½•åˆ° `_omp/memory/sessions/{date}.yaml` çš„ `errors` å­—æ®µ

### éªŒè¯è„šæœ¬

```bash
# éªŒè¯æ‰€æœ‰ YAML æ–‡ä»¶
_omp/skills/memory-extraction/scripts/validate.sh
```

---

## è§¦å‘æ¡ä»¶è¯¦è§£

### è‡ªåŠ¨è§¦å‘æ—¶æœº

| è§¦å‘ä¿¡å· | è¯´æ˜ | ç¤ºä¾‹ |
|----------|------|------|
| ç”¨æˆ·ç»“æŸå¯¹è¯ | ç”¨æˆ·è¯´ "bye", "ç»“æŸ", "exit", "è°¢è°¢" | `ç”¨æˆ·: å¥½çš„ï¼Œå…ˆè¿™æ ·` |
| éƒ¨ç½²å®Œæˆ | æ£€æµ‹åˆ° deploy/vercel/wrangler è¾“å‡º | `vercel --prod` æˆåŠŸ |
| é…ç½®å˜æ›´ | ä¿®æ”¹äº† env/secret/config æ–‡ä»¶ | æ›´æ–° `.env` |
| åˆ›å»ºæ–°ç›®å½• | åˆ›å»ºäº†é¡¹ç›®çº§ç›®å½• | `mkdir _omp/memory/` |
| é‡è¦å†³ç­– | å¯¹è¯ä¸­æ˜ç¡®äº†æŠ€æœ¯é€‰å‹ | `å†³å®šä½¿ç”¨ YAML æ ¼å¼` |

### ä¸è§¦å‘çš„åœºæ™¯

- æ™®é€šä»£ç ç¼–è¾‘ï¼ˆéé…ç½®æ–‡ä»¶ï¼‰
- è¯»å–æ“ä½œï¼ˆæ— å†™å…¥ï¼‰
- ä¸´æ—¶æ–‡ä»¶æ“ä½œ

---

## è¾…åŠ©èµ„æº

### æ¨¡æ¿æ–‡ä»¶

- `templates/memory-entry.yaml.tmpl` - è®°å¿†æ¡ç›®æ¨¡æ¿ (å«å…ƒæ•°æ®å’Œå†²çªè¿½è¸ª)

> ğŸ’¡ **æ‰©å±•æ¨¡æ¿**: å¦‚éœ€ session æˆ– decision ä¸“ç”¨æ¨¡æ¿ï¼Œå¯åŸºäº memory-entry.yaml.tmpl åˆ›å»º

### å‚è€ƒæ–‡æ¡£

- `references/classification-rules.md` - å¤šç»´åº¦åˆ†ç±»è§„åˆ™
- `references/rot-filter.md` - ROT è¿‡æ»¤è§„åˆ™
- `references/decay-model.md` - Ebbinghaus è¡°å‡æ¨¡å‹
- `references/health-score.md` - å¥åº·åº¦è®¡ç®—å…¬å¼

### Schema éªŒè¯ (å¯é€‰)

> âš ï¸ **å¾…å®ç°**: Schema éªŒè¯æ–‡ä»¶å°šæœªåˆ›å»ºï¼Œå¯æ ¹æ®éœ€è¦æ·»åŠ ï¼š
> - `_omp/memory/schema/project.schema.json`
> - `_omp/memory/schema/decisions.schema.json`

---

## æ‰§è¡Œæ£€æŸ¥æ¸…å•

Agent åœ¨å¯¹è¯ç»“æŸå‰æ‰§è¡Œï¼š

- [ ] æ˜¯å¦æœ‰éƒ¨ç½²çŠ¶æ€å˜æ›´ï¼Ÿâ†’ æ›´æ–° `deployment`
- [ ] æ˜¯å¦æœ‰æ–°è·¯å¾„/ç›®å½•ï¼Ÿâ†’ æ›´æ–° `paths`
- [ ] æ˜¯å¦æœ‰é‡è¦å†³ç­–ï¼Ÿâ†’ è®°å½•åˆ° `decisions.yaml`
- [ ] æ˜¯å¦æœ‰é…ç½®å˜æ›´ï¼Ÿâ†’ æ›´æ–°å¯¹åº”å­—æ®µ
- [ ] æ˜¯å¦æœ‰ç”¨æˆ·åå¥½/æŠ€èƒ½ï¼Ÿâ†’ å­˜å…¥ `openmemory`
- [ ] æ›´æ–° `_meta.last_updated`ï¼ˆä½¿ç”¨ç²¾ç¡® ISO 8601 æ—¶é—´æˆ³ï¼‰
- [ ] è¿è¡Œ `validate.sh` éªŒè¯æ ¼å¼

---

## å†²çªæ£€æµ‹

Agent åœ¨æŸ¥è¯¢è®°å¿†æ—¶åº”æ£€æµ‹ä¸¤ç³»ç»Ÿæ•°æ®ä¸€è‡´æ€§ï¼š

### æ£€æµ‹æ—¶æœº

- ç”¨æˆ·è¯¢é—®é…ç½®/éƒ¨ç½²ä¿¡æ¯æ—¶
- æ‰§è¡Œ `/memory sync` å‘½ä»¤æ—¶
- å‘ç°ä¸¤ç³»ç»Ÿè¿”å›ä¸åŒç»“æœæ—¶

### æ£€æµ‹é€»è¾‘

```
æŸ¥è¯¢ç»“æœ
    â†“
æå–å…³é”®å®ä½“ (URL, é…ç½®å€¼, æŠ€æœ¯é€‰å‹)
    â†“
æ¯”å¯¹ _omp/memory/ vs openmemory
    â†“
å‘ç°å·®å¼‚ â†’ æç¤ºç”¨æˆ·ç¡®è®¤
    â†“
ç”¨æˆ·é€‰æ‹© â†’ æ›´æ–°/åˆ é™¤è¿‡æ—¶è®°å½•
```

### å†²çªå¤„ç†

| åœºæ™¯ | å¤„ç†æ–¹å¼ |
|------|----------|
| URL ä¸ä¸€è‡´ | æç¤ºç”¨æˆ·ï¼Œä¼˜å…ˆ `_omp/memory/` |
| æŠ€æœ¯é€‰å‹å†²çª | å±•ç¤ºä¸¤è¾¹ï¼Œè¯·æ±‚å†³ç­– |
| æ—¶é—´æˆ³å¯åˆ¤æ–­ | è‡ªåŠ¨ä¿ç•™è¾ƒæ–°ç‰ˆæœ¬ |

---

## å¯¹è¯å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½

Agent åœ¨å¯¹è¯å¼€å§‹æ—¶åº”**å¹¶è¡ŒæŸ¥è¯¢**ä¸¤ä¸ªç³»ç»Ÿï¼š

```
å¯¹è¯å¼€å§‹
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  _omp/memory/  â”‚     â”‚   openmemory    â”‚
â”‚   (è¯»å– YAML)   â”‚     â”‚ (search_memory) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
               ä¸Šä¸‹æ–‡èåˆ
```

**åŠ è½½æ­¥éª¤**:
1. è¯»å– `_omp/memory/project.yaml` è·å–é¡¹ç›®é…ç½®
2. è°ƒç”¨ `search_memory_openmemory` æŸ¥è¯¢ç›¸å…³ç”¨æˆ·è®°å¿†
3. èåˆä¸¤è¾¹ä¿¡æ¯ä½œä¸ºå¯¹è¯ä¸Šä¸‹æ–‡

## é™çº§ç­–ç•¥

**å½“ openmemory MCP ä¸å¯ç”¨æ—¶**:

1. æ£€æµ‹ MCP è¿æ¥çŠ¶æ€ï¼ˆè°ƒç”¨å¤±è´¥æˆ–è¶…æ—¶ï¼‰
2. é™çº§åˆ°ä»… `_omp/memory/` å­˜å‚¨
3. ç”¨æˆ·çº§ä¿¡æ¯ä¸´æ—¶å­˜å…¥ `_omp/memory/user-context.yaml`
4. æœåŠ¡æ¢å¤åæç¤ºç”¨æˆ·åŒæ­¥

```yaml
# _omp/memory/user-context.yaml (é™çº§æ—¶ä½¿ç”¨)
_degraded: true
_reason: "openmemory MCP unavailable"
pending_memories:
  - text: "ç”¨æˆ·åå¥½: ä½¿ç”¨ä¸­æ–‡"
    created_at: 2026-02-02T10:30:00Z
```

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | å˜æ›´ |
|------|------|
| v2.1 | ç›®å½•é‡æ„ï¼š_omp/ ç»Ÿä¸€ç›®å½•ï¼Œç§»é™¤ rules/ï¼Œåˆ†ç±»è§„åˆ™å†…åµŒ |
| v2.0 | åŒå±‚è®°å¿†æ¶æ„ï¼šæ•´åˆ openmemory MCPï¼Œæ™ºèƒ½åˆ†ç±»è·¯ç”± |
| v1.1 | æ·»åŠ é”™è¯¯å¤„ç†ã€Schema éªŒè¯ã€æ¨¡æ¿æ–‡ä»¶ã€è§¦å‘æ¡ä»¶è¯¦è§£ |
| v1.0 | åˆå§‹ç‰ˆæœ¬ï¼šè‡ªåŠ¨æå–ã€YAML å­˜å‚¨ã€å¤š Agent é€šçŸ¥ |

