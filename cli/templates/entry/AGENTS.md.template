# {{PROJECT_NAME}} - Agent Instructions

This project uses **OpenMemory Plus** for persistent agent memory management.

---

## ğŸ§  Memory System (Auto-Enabled)

> **Core Principle**: Agent automatically extracts memories without user intervention

### Session Lifecycle

#### ğŸš€ Session Start (Auto)

1. **Load project context**
   ```
   Read _omp/memory/project.yaml
   Read _omp/memory/activeContext.md
   ```

2. **Load user preferences** (if openmemory MCP available)
   ```
   search_memory_openmemory: "user preferences for {{PROJECT_NAME}}"
   ```

3. **Restore work state**
   ```
   Read _omp/memory/progress.md
   ```

#### âš¡ During Session - Auto-Extraction

**When detecting trigger events, automatically dispatch memory-extraction subagent:**

| Priority | Trigger | Detection Signal | Storage |
|----------|---------|------------------|---------|
| P0 | Task complete | Task marked complete | `progress.md` |
| P0 | Tech decision | "decide/choose/use" or "å†³å®š/é€‰æ‹©/é‡‡ç”¨" | `decisions.yaml` |
| P1 | Config change | .env, config file modified | `project.yaml` |
| P1 | Deployment | deploy/vercel/wrangler output | `project.yaml` |
| P2 | User preference | "I prefer/like" or "æˆ‘å–œæ¬¢/åå¥½" | `openmemory` |
| P2 | Architecture | "pattern/architecture/design" | `systemPatterns.md` |
| P3 | Checkpoint | Every 10 exchanges | `activeContext.md` |

**Subagent dispatch template**:
```
Use sub-agent-explore or Task tool:
  name: memory-extract-{timestamp}
  instruction: See _omp/skills/memory-extraction/subagent-prompt.md
```

#### ğŸ Session End (Auto)

Dispatch final memory-extraction subagent:
- Session summary â†’ `activeContext.md`
- Unextracted learnings â†’ appropriate memory files
- Progress updates â†’ `progress.md`

---

## ğŸ“ Project Structure

```
_omp/                          # OpenMemory Plus core
â”œâ”€â”€ commands/                  # Agent commands
â”‚   â””â”€â”€ memory.md              # /memory entry point
â”œâ”€â”€ workflows/                 # Multi-step workflows
â”‚   â””â”€â”€ memory/                # Memory management workflow
â”œâ”€â”€ skills/                    # Agent skills
â”‚   â””â”€â”€ memory-extraction/     # Auto-extract learnings
â”‚       â”œâ”€â”€ SKILL.md           # Skill definition
â”‚       â”œâ”€â”€ subagent-prompt.md # Subagent dispatch template
â”‚       â””â”€â”€ triggers.md        # Trigger definitions
â””â”€â”€ memory/                    # Project memory files
    â”œâ”€â”€ project.yaml           # Project config (SSOT)
    â”œâ”€â”€ activeContext.md       # Current session context
    â”œâ”€â”€ productContext.md      # Product/feature context
    â”œâ”€â”€ progress.md            # Development progress
    â”œâ”€â”€ projectbrief.md        # Project overview
    â”œâ”€â”€ systemPatterns.md      # Architecture patterns
    â”œâ”€â”€ techContext.md         # Technical decisions
    â””â”€â”€ decisions.yaml         # Decision records
```

---

## ğŸ¯ Manual Commands

Use `/memory` for manual memory operations:

| Command | Description |
|---------|-------------|
| `/memory` | Open memory management menu |
| `/memory save` | Force save current context |
| `/memory load` | Load specific memory file |
| `/memory search <query>` | Search through memories |
| `/memory sync` | Sync with external memory (Qdrant) |

---

## âš™ï¸ Integration

This project is configured for: {{IDE_LIST}}

### Dual-Layer Memory Architecture

| Layer | Storage | Purpose |
|-------|---------|---------|
| Project | `_omp/memory/` | Project config, decisions, progress |
| User | `openmemory` MCP | User preferences, cross-project context |

### MCP Configuration

For MCP setup, see your IDE-specific settings file or run:
```bash
npx openmemory-plus install --show-mcp
```

