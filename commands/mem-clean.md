---
description: '清理 ROT (冗余/过时/琐碎) 记忆'
argument-hint: '[--dry-run] [--force] [--type=all|redundant|outdated|trivial]'
---

# /mem clean

清理 ROT (Redundant, Outdated, Trivial) 记忆。

> 💡 返回入口: `/memory`

## 触发

- `/mem clean`
- `/memory clean`
- `清理记忆`

## 执行流程

```
/mem clean
    ↓
1. 列出所有 openmemory 记忆
    ↓
2. 分析识别 ROT
    ↓
3. 生成清理报告
    ↓
4. 用户确认
    ↓
5. 批量删除
```

## ROT 识别规则

### Redundant (冗余)

| 规则 | 说明 |
|------|------|
| 语义相似度 >90% | 两条记忆表达相同意思 |
| 完全重复 | 文本完全相同 |
| 子集包含 | 一条记忆是另一条的子集 |

### Outdated (过时)

| 规则 | 说明 |
|------|------|
| 被明确否定 | "不再使用 X" 后 X 相关记忆 |
| 版本过时 | 旧版本配置信息 |
| 时间过期 | 临时性信息超过有效期 |

### Trivial (琐碎)

| 规则 | 说明 |
|------|------|
| 长度 <10 字符 | 过短无意义 |
| 纯确认语 | "好的", "OK", "明白" |
| 无实质内容 | 无法提取有价值信息 |

## 输出格式

```
🧹 记忆清理分析

扫描完成: 共 47 条记忆

📊 ROT 分析结果:

🔴 Redundant (冗余): 3 条
├── [ID: abc123] "用户偏好中文"
│   └── 与 [ID: def456] 重复

🟡 Outdated (过时): 2 条
├── [ID: mno345] "部署地址是 old-url"
│   └── 已被新地址替代

⚪ Trivial (琐碎): 5 条
├── [ID: pqr678] "好的"

---
建议清理: 10 条 | 保留: 37 条

确认清理? [y/N]:
```

## 安全机制

1. **预览模式**: 默认只显示，不删除
2. **确认机制**: 必须用户确认才执行
3. **批量限制**: 单次最多删除 20 条
4. **保护规则**: 最近 7 天的记忆不自动标记

## 参数

| 参数 | 说明 | 默认值 |
|------|------|--------|
| --dry-run | 仅预览，不删除 | true |
| --force | 跳过确认 | false |
| --type | 仅清理指定类型 | all |

## 示例

```bash
# 预览清理
/mem clean

# 仅清理冗余
/mem clean --type=redundant

# 强制清理 (跳过确认)
/mem clean --force
```

---

**版本**: v1.1

